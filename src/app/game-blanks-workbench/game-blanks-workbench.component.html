<div class="container d-flex flex-column p-2" *ngIf="game">
    <div class="header m-1 d-flex flex-row justify-content-between align-items-center">
        <h3>Blank sets for game `{{game.name}}`</h3>
        <button mat-raised-button color="primary" (click)="showPreGeneratePopup()">
            <mat-icon>add</mat-icon>
            Add new blank set
        </button>
    </div>
    <table mat-table [dataSource]="dataSource" class="m-2 mat-elevation-z8 blank-set-table">

        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef> #</th>
            <td mat-cell *matCellDef="let element"> {{gameBlankSets.indexOf(element) + 1}} </td>
        </ng-container>

        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let item">{{ item.name }}</td>
        </ng-container>

        <ng-container matColumnDef="ticketsAmount">
            <th mat-header-cell *matHeaderCellDef>Blanks amount</th>
            <td mat-cell *matCellDef="let item" class="blanks-number-container">{{ item.numberOfBlanks }}</td>
        </ng-container>

        <ng-container matColumnDef="created">
            <th mat-header-cell *matHeaderCellDef>Created at</th>
            <td mat-cell *matCellDef="let item">{{ item.createdAt | date }}</td>
        </ng-container>

        <ng-container matColumnDef="author">
            <th mat-header-cell *matHeaderCellDef>Created by</th>
            <td mat-cell *matCellDef="let item">{{ item.owner.username }}</td>
        </ng-container>

        <ng-container matColumnDef="show">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let item" class="show-container">
                <button mat-raised-button
                        color="primary"
                        matTooltip="Show blanks">
                    <mat-icon>remove_red_eye</mat-icon>
                </button>
            </td>
        </ng-container>

        <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let item" class="show-container">
                <button *ngIf="item.isOwnedByCurrentUser"
                        mat-raised-button
                        color="primary"
                        matTooltip="Delete blank set"
                        (click)="delete(item)">
                    <mat-icon>delete_outline</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        <tr class="mat-row empty-rows-message" *matNoDataRow>
            <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                There are no blank sets for this game yet.
            </td>
        </tr>
    </table>
    <div *ngIf="!gameBlankSets" class="d-flex flex-column justify-content-center">
        <p style="text-align: center">Loading blank sets for the game...</p>
        <mat-spinner></mat-spinner>
    </div>
</div>
<div *ngIf="!game" class="d-flex flex-column justify-content-center">
    <p style="text-align: center">Loading blank sets for the game...</p>
    <mat-spinner></mat-spinner>
</div>
