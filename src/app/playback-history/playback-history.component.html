<div class="container">
    <div class="header d-flex flex-row-reverse">
        <button mat-icon-button
        (click)="closePopup()"
        class="close-button"
        matTooltip="Exit">
        <mat-icon>close</mat-icon>
        </button>
    </div>
    <table mat-table [dataSource]="dataSource" class="mb-2 mat-elevation-z8 playback-history-table">

        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef> #</th>
            <td mat-cell *matCellDef="let element"> {{gamePlays.indexOf(element) + 1}} </td>
        </ng-container>

        <ng-container matColumnDef="startedAt">
            <th mat-header-cell *matHeaderCellDef>Started at</th>
            <td mat-cell *matCellDef="let item">{{ item.startedAt | date}}</td>
        </ng-container>

        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let item">{{ getStatus(item) }}</td>
        </ng-container>

        <ng-container matColumnDef="author">
            <th mat-header-cell *matHeaderCellDef>Created by</th>
            <td mat-cell *matCellDef="let item">{{ item.owner.username }}</td>
        </ng-container>

        <ng-container matColumnDef="remove">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element">
                <button mat-icon-button
                        (click)="removeFromTable(element)"
                        matTooltip="Remove game play from history">
                    <mat-icon>delete_outline</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        <tr class="mat-row empty-rows-message" *matNoDataRow>
            <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                There are no playbacks for this game yet.
            </td>
        </tr>
    </table>
    <div class="spinner-container mb-2" *ngIf="gamePlaysArePreloaded">
        <mat-spinner></mat-spinner>
        Loading playback history...
    </div>
</div>
